<!-- ─── CSS: variables + optional transitions ───────────────────────────── -->
<style>
:root{
  /* color tokens (light defaults) */
  --color-bg: #ffffff;
  --color-text: #111111;
  --color-muted: #666666;
  --card-bg: #f7f7f7;
  --accent: #000000;

  /* hero tokens (existing values kept) */
  --hero-radius: 22px;
  --hero-shadow: 0 18px 40px rgba(0,0,0,.675), 0 2px 8px rgba(0,0,0,.429);
  --hero-gutter: clamp(12px, 3vw, 28px);
  --hero-focus-y: 38%;

  /* video blur — 2px for both light and dark */
  --video-blur: 2px;
}

:root[data-theme="dark"]{
  --color-bg: #0b0b0c;
  --color-text: #eaeaea;
  --color-muted: #bdbdbd;
  --card-bg: #111214;
  --accent: #f7f7f7;
  --hero-shadow: 0 24px 60px rgba(0,0,0,.75);
  --video-blur: 2px;
}

/* smooth transitions (optional) */
* { transition: background-color 230ms ease, color 230ms ease, box-shadow 230ms ease, border-color 230ms ease; }
</style>

<!-- ─── B: Toggle button HTML (inside .overlay) ────────────────────────── -->
<div class="overlay">
  <h1>Jordan Alderman – UX/UI Portfolio</h1>
  <p class="muted">Case studies · Prototypes · Interactive demos</p>

  <button id="theme-toggle" aria-pressed="false" aria-label="Toggle light and dark mode" type="button">
    <span id="theme-icon" aria-hidden="true">🌙</span>
    <span class="visually-hidden">Toggle theme</span>
  </button>
</div>

<!-- ─── C: JS for theme detect/toggle/persist ───────────────────────────── -->
<script>
(function () {
  const KEY = 'site-theme';
  const root = document.documentElement;
  const btn = document.getElementById('theme-toggle');
  const icon = document.getElementById('theme-icon');

  function getStoredTheme() { return localStorage.getItem(KEY); }
  function getSystemPrefersDark() { return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches; }

  function applyTheme(theme) {
    if(theme === 'dark'){
      root.setAttribute('data-theme','dark');
      btn && btn.setAttribute('aria-pressed','true');
      if(icon) icon.textContent = '☀️';
    } else {
      root.setAttribute('data-theme','light');
      btn && btn.setAttribute('aria-pressed','false');
      if(icon) icon.textContent = '🌙';
    }
  }

  // initialize
  (function init() {
    const stored = getStoredTheme();
    if(stored === 'light' || stored === 'dark'){
      applyTheme(stored);
    } else {
      applyTheme(getSystemPrefersDark() ? 'dark':'light');
    }
  })();

  function toggleTheme(){
    const current = root.getAttribute('data-theme') === 'dark' ? 'dark':'light';
    const next = current==='dark' ? 'light':'dark';
    applyTheme(next);
    localStorage.setItem(KEY,next);
  }

  if(btn) btn.addEventListener('click', toggleTheme);

  // react to system changes if no stored preference
  if(window.matchMedia){
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
      if(!getStoredTheme()) applyTheme(e.matches ? 'dark':'light');
    });
  }
})();
</script>
